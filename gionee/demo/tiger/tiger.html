<!DOCTYPE html>  
<html>  
    <head>  
        <meta charset="utf-8">  
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />  
        <meta name="format-detection"content="telephone=no, email=no" />  
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="format-detection" content="telphone=no, email=no" /> 
        <style>  
          *{  
             margin:0;  
             padding:0;  
          }  
          ul{  
            text-align: center;  
            margin: 100px auto;  
            overflow: hidden;  
          }  
          ul li{  
             width:40px;  
             height:20px;  
             overflow: hidden;  
             background: #ff0000;  
             text-align: center;  
             line-height: 20px;  
             display: inline-block;  
             margin:0 20px;  
             color: #fff;  
             position: relative;  
          }  
          dl{  
            position: absolute;  
            top: 0;  
            left:0;  
            width:40px;  
            height:20px;  
          }  
          dd{  
            display: block;  
            width:40px;  
            height:20px;  
  
          }  
          .btn{  
            background: #333;  
            text-align: center;  
            color: #ff0000;  
            margin: 0 auto;  
            display: block;  
            border: none;  
            padding: 10px;  
            font-size: 18px;  
          }  
          .panel{  
            text-align: center;  
            margin: 50px auto;  
          }  
          
        </style>  
    </head>  
    <body>  
        <ul>  
            <li>  
                <dl class="dl">  
                    <dd>0</dd>  
                    <dd>1</dd>  
                    <dd>2</dd>  
                    <dd>3</dd>  
                    <dd>4</dd>  
                    <dd>5</dd>  
                    <dd>6</dd>  
                    <dd>7</dd>  
                    <dd>8</dd>  
                    <dd>9</dd>  
               </dl>  
            </li>  
            <li>  
                <dl class="dl">  
                    <dd>0</dd>  
                    <dd>1</dd>  
                    <dd>2</dd>  
                    <dd>3</dd>  
                    <dd>4</dd>  
                    <dd>5</dd>  
                    <dd>6</dd>  
                    <dd>7</dd>  
                    <dd>8</dd>  
                    <dd>9</dd>  
               </dl>  
            </li>  
            <li>  
                <dl class="dl">  
                    <dd>0</dd>  
                    <dd>1</dd>  
                    <dd>2</dd>  
                    <dd>3</dd>  
                    <dd>4</dd>  
                    <dd>5</dd>  
                    <dd>6</dd>  
                    <dd>7</dd>  
                    <dd>8</dd>  
                    <dd>9</dd>  
               </dl>  
            </li> 
        </ul>  
        <button class="btn">点击走一个</button>  
      
    </body>  
    <script>   
     var oli=document.getElementsByTagName("li"),  
        
         btn=document.querySelector(".btn"),  
         odl=document.querySelectorAll(".dl"),  
         Let=odl[0].querySelectorAll("dd").length,H=20,first=3,second=5,  
         third=8,cf=cs=ct=0,timer=null,str="";  
        
        for (var i = 0; i < odl.length; i++) {  
            var html=odl[i].innerHTML;  
                odl[i].innerHTML="";  
                ck=stradd(html,3);  
                odl[i].innerHTML=ck;  
         };   
       
         function run(){  
            for (var i = 0; i < oli.length; i++) {  
              
            	var Num=parseInt(Math.floor(Math.random()*10)),  
					odl=oli[i].getElementsByTagName("dl")[0],  
					odd=odl.getElementsByTagName("dd"),  
					size=odd.length,  
					height=odl.offsetHeight,  
					tops=odd[Num+(size-Let)].offsetTop;  
				
                odl.style.top=0;  
                str+=Num;   
				i==4?console.log(str):''; 
                starmove(odl,{"top":-(tops)},function(){
					// TODO duanwt	
				});    
           };     
         }  
         btn.onclick=function(){  
            str="";  
            run();
         }  
		 
		function stradd(str,size){  
			if(Object.prototype.toString.call(str) == "[object String]"){  
				for (var i = 0; i < size; i++) {  
					str+=str;  
				};   
			}else{  
				return "数据类型错误";  
			}  
			 return str;  
        }  
        function getStyle(obj,name){  
           return obj.currentStyle?obj.currentStyle[name]:getComputedStyle(obj,false)[name];  
        }  
        function starmove(obj,json,funEnd){  
            clearInterval(obj.timer);  
            var Bstop=true;  
            obj.timer=setInterval(function(){  
                for(var attr in json){  
                   var speed=0;  
                   if(attr=="opacity"){  
                       var cur=Math.round(parseFloat(getStyle(obj,attr)*100));  
                   }else{  
                       var cur=parseInt(getStyle(obj,attr));  
                   }  
                   speed=(json[attr]-cur)/40; //默认20，值越大运动越慢，时间越长 
                   speed=speed>0?Math.ceil(speed):Math.floor(speed);   
                   if(cur!=json[attr]){  
                        Bstop=false;  
                   }else{  
                        Bstop=true;  
                   }  
  
                   if(attr=="opacity"){  
                       obj.style.opacity=(cur+speed)/100;  
                   }else{  
                       obj.style[attr]=cur+speed+"px";  
                   }  
                }  
                if(Bstop){  
                      clearInterval(obj.timer);  
                      if(funEnd)funEnd();  
                }  
            },30)  
         }  
		 
    </script>  
</html>  