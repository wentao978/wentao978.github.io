<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>无标题文档</title>
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no, address=no, email=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<script src="size.js"></script>
<style>
*{ margin:0; padding:0;}
span{ background:red;}
#span1{ font-size:1em;}
</style>
<script>
document.addEventListener('DOMContentLoaded',function(){
	
	if(parseInt(getStyle(document.getElementById('span1'),'fontSize')) != parseInt(document.getElementsByTagName('html')[0].style.fontSize)){
		//alert('系统字体或浏览器字体大小有变化');	
		document.body.style.backgroundColor = 'green';
		var cw = document.documentElement.clientWidth;
		cw = cw > 640 ? 640 : cw;
		document.getElementsByTagName('html')[0].setAttribute('style','font-size:'+cw/40+'px');
		document.getElementById('span7').innerHTML = parseInt(getStyle(document.getElementById('span1'),'fontSize')) / parseInt(document.getElementsByTagName('html')[0].style.fontSize) ;
	};
	
	document.getElementById('span2').innerHTML = document.getElementById('span1').offsetWidth;	
	document.getElementById('span3').innerHTML = getStyle(document.getElementById('span1'),'fontSize');
	document.getElementById('span4').innerHTML = document.documentElement.clientWidth;

	//alert(	document.getElementsByTagName('html')[0].getAttribute('style'));
	document.getElementById('span5').innerHTML = document.getElementsByTagName('html')[0].getAttribute('style');
	document.getElementById('span6').innerHTML = document.getElementsByTagName('html')[0].style.fontSize;
	
	function getStyle(obj,attr){    //获取非行间样式，obj是对象，attr是值
		if(obj.currentStyle){   //针对ie获取非行间样式
			return obj.currentStyle[attr];
		}else{
			return getComputedStyle(obj,false)[attr];   //针对非ie
		};
	};
		
},!1);
</script>
</head>
<body>
<span id="span1">这里是一段测试文字</span>
<span id="span2"></span>
<span id="span3"></span>
<span id="span4"></span>
<span id="span5"></span>
<span id="span6"></span>
<span id="span7"></span>
</body>
</html>