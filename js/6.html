<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<script type="text/javascript">

// 三个订阅者
var sub1 = { update: function(){ console.log(1) }};
var sub2 = { update: function(){ console.log(2) }};
var sub3 = { update: function(){ console.log(3) }};

// 一个主题对象,包含订阅者
function Dep () {
    this.subs = [sub1, sub2, sub3];
}

// 主题对象分别调用订阅者的update方法
Dep.prototype.notify = function () {
    this.subs.forEach(function (sub) {
        sub.update();
    });
}

// 发布者发布消息，主题对象执行notify方法，进而触发订阅者执行update
var dep = new Dep();

// 一个发布者pub
var pub = {
    publish: function () {
        dep.notify();
    }
}

// 主题对象执行notify方法，进而触发订阅者执行update
pub.publish();
</script>
</body>
</html>